var __extends=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),annie;!function(e){var t=function(){function e(){this._instanceId=0,this._instanceType="annie.AObject",this._instanceId=e._object_id++}return Object.defineProperty(e.prototype,"instanceId",{get:function(){return this._instanceId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"instanceType",{get:function(){return this._instanceType},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){},e._object_id=0,e}();e.AObject=t;var n=function(t){function n(){var e=t.call(this)||this;return e.eventTypes={},e.eventTypes1={},e._instanceType="annie.EventDispatcher",e}return __extends(n,t),n.getMouseEventCount=function(e){void 0===e&&(e="");var t=0;return""==e?t=n._totalMEC:n._MECO[e]&&(t=n._MECO[e]),t},n.prototype.addEventListener=function(e,t,n){if(void 0===n&&(n=!0),!e)throw new Error("添加侦听的type值为undefined");if(!t)throw new Error("侦听回调函数不能为null");var a=this,r=a.eventTypes;n||(r=a.eventTypes1),r[e]instanceof Object||(r[e]=[]),r[e].indexOf(t)<0&&(r[e].unshift(t),0==e.indexOf("onMouse")&&a._changeMouseCount(e,!0))},n.prototype._changeMouseCount=function(e,t){var a=t?1:-1;n._MECO[e]||(n._MECO[e]=0),n._MECO[e]+=a,n._MECO[e]<0&&(n._MECO[e]=0),n._totalMEC+=a},n.prototype.dispatchEvent=function(t,n,a){void 0===n&&(n=null),void 0===a&&(a=!0);var r=this;"string"==typeof t&&(r._defaultEvent instanceof e.Event?r._defaultEvent.reset(t,r):r._defaultEvent=new e.Event(t),t=r._defaultEvent);var o=r.eventTypes[t.type];if(a||(o=r.eventTypes1[t.type]),o instanceof Array){t.target instanceof Object||(t.target=r),void 0!=n&&(t.data=n);for(var i=o.length,s=i-1;s>=0;s--)t._pd||(o[s]instanceof Function?o[s](t):o.splice(s,1));return!0}return!1},n.prototype.hasEventListener=function(e,t){void 0===t&&(t=!0);var n=this;if(t){if(n.eventTypes&&n.eventTypes[e]instanceof Array&&n.eventTypes[e].length>0)return!0}else if(n.eventTypes1&&n.eventTypes1[e]instanceof Array&&n.eventTypes1[e].length>0)return!0;return!1},n.prototype.removeEventListener=function(e,t,n){void 0===n&&(n=!0);var a=this,r=a.eventTypes[e];if(n||(r=a.eventTypes1[e]),r instanceof Array)for(var o=r.length,i=o-1;i>=0;i--)void 0!=t&&r[i]!=t||(r.splice(i,1),0==e.indexOf("onMouse")&&a._changeMouseCount(e,!1))},n.prototype.removeAllEventListener=function(){var e=this;for(var t in e.eventTypes)if(0==t.indexOf("onMouse"))for(var n=0;n<e.eventTypes[t].length;n++)e._changeMouseCount(t,!1);for(var t in e.eventTypes1)if(0==t.indexOf("onMouse"))for(var n=0;n<e.eventTypes1[t].length;n++)e._changeMouseCount(t,!1);e.eventTypes1={},e.eventTypes={}},n.prototype.destroy=function(){var e=this;e.removeAllEventListener(),e.eventTypes1=null,e.eventTypes=null,e._defaultEvent=null},n._MECO={},n._totalMEC=0,n}(t);e.EventDispatcher=n}(annie||(annie={}));var annie;!function(e){var t=function(e){function t(t){var n=e.call(this)||this;return n.type="",n.target=null,n.data=null,n._pd=!1,n._instanceType="annie.Event",n.type=t,n}return __extends(t,e),t.prototype.stopImmediatePropagation=function(){this._pd=!0},t.prototype.destroy=function(){var e=this;e.target=null,e.data=null},t.prototype.reset=function(e,t){var n=this;n.target=t,n._pd=!1,n.type=e},t.ON_INIT_STAGE="onInitStage",t.RESIZE="onResize",t.ON_RUN_CHANGED="onRunChanged",t.ON_PLAY_UPDATE="onPlayUpdate",t.ON_PLAY_END="onPlayEnd",t.ON_PLAY_START="onPlayStart",t.ON_FLIP_START="onFlipStart",t.ON_FLIP_STOP="onFlipStop",t.ON_SCROLL_TO_HEAD="onScrollToHead",t.ON_SCROLL_STOP="onScrollStop",t.ON_SCROLL_START="onScrollStart",t.ON_SCROLL_ING="onScrollIng",t.ON_SCROLL_TO_END="onScrollToEnd",t.ON_SLIDE_START="onSlideStart",t.ON_SLIDE_END="onSlideEnd",t.ADD_TO_STAGE="onAddToStage",t.REMOVE_TO_STAGE="onRemoveToStage",t.ENTER_FRAME="onEnterFrame",t.END_FRAME="onEndFrame",t.CALL_FRAME="onCallFrame",t.COMPLETE="onComplete",t.PROGRESS="onProgress",t.ERROR="onError",t.ABORT="onAbort",t.START="onStart",t.TIMER="onTimer",t.TIMER_COMPLETE="onTimerComplete",t.ON_DRAW_PERCENT="onDrawPercent",t}(e.AObject);e.Event=t}(annie||(annie={}));var annie;!function(e){var t=function(e){function t(t){var n=e.call(this,t)||this;return n.clientX=0,n.clientY=0,n.stageX=0,n.stageY=0,n.localX=0,n.localY=0,n.currentTarget=null,n.identifier=0,n.timeStamp=0,n._instanceType="annie.MouseEvent",n}return __extends(t,e),t.prototype.updateAfterEvent=function(){this.target.stage._updateMatrix()},t.prototype.destroy=function(){this.currentTarget=null,e.prototype.destroy.call(this)},t.MOUSE_DOWN="onMouseDown",t.MOUSE_UP="onMouseUp",t.CLICK="onMouseClick",t.MOUSE_MOVE="onMouseMove",t.MOUSE_OVER="onMouseOver",t.MOUSE_OUT="onMouseOut",t}(e.Event);e.MouseEvent=t}(annie||(annie={}));var annie;!function(e){var t=function(t){function n(n){var a=t.call(this,n)||this;return a.clientPoint1=new e.Point,a.clientPoint2=new e.Point,a.scale=0,a.rotate=0,a._instanceType="annie.TouchEvent",a}return __extends(n,t),n.prototype.updateAfterEvent=function(){this.target._updateMatrix()},n.prototype.destroy=function(){var e=this;e.clientPoint1=null,e.clientPoint2=null,t.prototype.destroy.call(this)},n.ON_MULTI_TOUCH="onMultiTouch",n}(e.Event);e.TouchEvent=t}(annie||(annie={}));var annie;!function(e){var t=function(e){function t(t,n){void 0===t&&(t=0),void 0===n&&(n=0);var a=e.call(this)||this;a.x=0,a.y=0;var r=a;return r._instanceType="annie.Point",r.x=t,r.y=n,a}return __extends(t,e),t.prototype.destroy=function(){},t.distance=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.length;return 4==n?Math.sqrt((e[0]-e[2])*(e[0]-e[2])+(e[1]-e[3])*(e[1]-e[3])):2==n?Math.sqrt((e[0].x-e[1].x)*(e[0].x-e[1].x)+(e[0].y-e[1].y)*(e[0].y-e[1].y)):void 0},t}(e.AObject);e.Point=t}(annie||(annie={}));var annie;!function(e){function t(e){switch(e){case r:case-o:return 0;case a:case-a:return-1;case o:case-r:return 0;default:return Math.cos(e)}}function n(e){switch(e){case r:case-o:return 1;case a:case-a:return 0;case o:case-r:return-1;default:return Math.sin(e)}}var a=Math.PI,r=a>>1,o=a+r,i=Math.PI/180,s=function(a){function r(t,n,r,o,i,s){void 0===t&&(t=1),void 0===n&&(n=0),void 0===r&&(r=0),void 0===o&&(o=1),void 0===i&&(i=0),void 0===s&&(s=0);var l=a.call(this)||this;l.a=1,l.b=0,l.c=0,l.d=1,l.tx=0,l.ty=0,l.transformPoint=function(t,n,a){void 0===a&&(a=null);var r=this;return a instanceof e.Point||(a=new e.Point),a.x=t*r.a+n*r.c+r.tx,a.y=t*r.b+n*r.d+r.ty,a},l.prepend=function(e){var t=this,n=e.a,a=e.b,r=e.c,o=e.d,i=e.tx,s=e.ty,l=t.a,c=t.c,u=t.tx;t.a=n*l+r*t.b,t.b=a*l+o*t.b,t.c=n*c+r*t.d,t.d=a*c+o*t.d,t.tx=n*u+r*t.ty+i,t.ty=a*u+o*t.ty+s};var c=l;return c._instanceType="annie.Matrix",c.a=t,c.b=n,c.c=r,c.d=o,c.tx=i,c.ty=s,l}return __extends(r,a),r.prototype.clone=function(){var e=this;return new r(e.a,e.b,e.c,e.d,e.tx,e.ty)},r.prototype.setFrom=function(e){var t=this;t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t.tx=e.tx,t.ty=e.ty},r.prototype.identity=function(){var e=this;e.a=e.d=1,e.b=e.c=e.tx=e.ty=0},r.prototype.invert=function(){var e=this,t=new r(e.a,e.b,e.c,e.d,e.tx,e.ty),n=e.a,a=e.b,o=e.c,i=e.d,s=e.tx,l=e.ty;if(0==a&&0==o)return 0==n||0==i?t.a=t.d=t.tx=t.ty=0:(n=t.a=1/n,i=t.d=1/i,t.tx=-n*s,t.ty=-i*l),t;var c=n*i-a*o;if(0==c)return t.identity(),t;c=1/c;var u=t.a=i*c;return a=t.b=-a*c,o=t.c=-o*c,i=t.d=n*c,t.tx=-(u*s+o*l),t.ty=-(a*s+i*l),t},r.prototype.createBox=function(e,a,r,o,s,l,c,u,_){var d=this;if(0!=s?l=c=s%360:(l%=360,c%=360),0==l&&0==c)d.a=r,d.b=d.c=0,d.d=o;else{l*=i,c*=i;var p=t(l),h=n(l);l==c?(d.a=p*r,d.b=h*r):(d.a=t(c)*r,d.b=n(c)*r),d.c=-h*o,d.d=p*o}d.tx=e+u-(u*d.a+_*d.c),d.ty=a+_-(u*d.b+_*d.d)},r.isEqual=function(e,t){return e.tx==t.tx&&e.ty==t.ty&&e.a==t.a&&e.b==t.b&&e.c==t.c&&e.d==t.d},r.prototype.concat=function(e){var t=this,n=t.a,a=t.b,r=t.c,o=t.d,i=t.tx,s=t.ty,l=e.a,c=e.b,u=e.c,_=e.d,d=e.tx,p=e.ty;t.a=n*l+a*u,t.b=n*c+a*_,t.c=r*l+o*u,t.d=r*c+o*_,t.tx=i*l+s*u+d,t.ty=i*c+s*_+p},r.prototype.rotate=function(e){var t=this,n=Math.sin(e),a=Math.cos(e),r=t.a,o=t.b,i=t.c,s=t.d,l=t.tx,c=t.ty;t.a=r*a-o*n,t.b=r*n+o*a,t.c=i*a-s*n,t.d=i*n+s*a,t.tx=l*a-c*n,t.ty=l*n+c*a},r.prototype.scale=function(e,t){var n=this;n.a*=e,n.d*=t,n.c*=e,n.b*=t,n.tx*=e,n.ty*=t},r.prototype.translate=function(e,t){var n=this;n.tx+=e,n.ty+=t},r.prototype.destroy=function(){},r}(e.AObject);e.Matrix=s}(annie||(annie={}));var annie;!function(e){var t=function(t){function n(e,n,a,r){void 0===e&&(e=0),void 0===n&&(n=0),void 0===a&&(a=0),void 0===r&&(r=0);var o=t.call(this)||this;o.x=0,o.y=0,o.width=0,o.height=0;var i=o;return i._instanceType="annie.Rectangle",i.x=e,i.y=n,i.height=r,i.width=a,o}return __extends(n,t),n.prototype.isPointIn=function(e){var t=this;return e.x>=t.x&&e.x<=t.x+t.width&&e.y>=t.y&&e.y<=t.y+t.height},n.createFromRects=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0==e.length)return null;if(1==e.length)return e[0];for(var n=e[0],a=n.x,r=n.y,o=n.width,i=n.height,s=void 0,l=void 0,c=void 0,u=void 0,_=1;_<e.length;_++)s=a+o,c=r+i,l=e[_].x+e[_].width,u=e[_].y+e[_].height,(a>e[_].x||0==s)&&(a=e[_].x),(r>e[_].y||0==c)&&(r=e[_].y),s<l&&(s=l),c<u&&(c=u),n.x=a,n.y=r,n.width=s-a,n.height=c-r;return n},n.createFromPoints=function(t){for(var n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];for(var r=n[0].x,o=n[0].y,i=n[0].x,s=n[0].y,l=1;l<n.length;l++)n[l]instanceof e.Point&&(r>n[l].x&&(r=n[l].x),o>n[l].y&&(o=n[l].y),i<n[l].x&&(i=n[l].x),s<n[l].y&&(s=n[l].y));return t.x=r,t.y=o,t.width=i-r,t.height=s-o,t},n.testRectCross=function(e,t){var n,a,r,o;return n=e.x+e.width/2,a=e.y+e.height/2,r=t.x+t.width/2,o=t.y+t.height/2,Math.abs(n-r)<=e.width/2+t.width/2&&Math.abs(a-o)<=e.height/2+t.height/2},n}(e.AObject);e.Rectangle=t}(annie||(annie={}));var annie;!function(e){var t=function(t){function n(){var n=t.call(this)||this;return n.a2x_um=!1,n.a2x_ua=!1,n.stage=null,n.parent=null,n._cAlpha=1,n._cMatrix=new e.Matrix,n.mouseEnable=!0,n.name="",n._x=0,n._offsetX=0,n._offsetY=0,n._y=0,n._scaleX=1,n._scaleY=1,n._rotation=0,n._alpha=1,n._skewX=0,n._skewY=0,n._anchorX=0,n._anchorY=0,n._visible=!0,n._matrix=new e.Matrix,n._mask=null,n._cp=!0,n._isUseToMask=0,n._hitArea=null,n._bounds=new e.Rectangle,n.isNeedDraw=!1,n.soundList=[],n._a2x_res_obj={},n._isOnStage=void 0,n._changeTransformInfo=[!1,!1,!1,!1,!1,!1],n._instanceType="annie.DisplayObject",n}return __extends(n,t),Object.defineProperty(n.prototype,"x",{get:function(){return this._x},set:function(e){var t=this;e!=t._x&&(t._x=e,t.a2x_um=!0),t._changeTransformInfo[0]=!0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){return this._y},set:function(e){var t=this;e!=t._y&&(t._y=e,t.a2x_um=!0),t._changeTransformInfo[1]=!0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scaleX",{get:function(){return this._scaleX},set:function(e){var t=this;e!=t._scaleX&&(t._scaleX=e,t.a2x_um=!0),t._changeTransformInfo[2]=!0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scaleY",{get:function(){return this._scaleY},set:function(e){var t=this;e!=t._scaleY&&(t._scaleY=e,t.a2x_um=!0),t._changeTransformInfo[3]=!0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"rotation",{get:function(){return this._rotation},set:function(e){var t=this;e==t._rotation&&0==t._skewX&&0==t._skewY||(t._rotation=e,t._skewX=0,t._skewY=0,t.a2x_um=!0),t._changeTransformInfo[4]=!0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"alpha",{get:function(){return this._alpha},set:function(e){var t=this;e!=t._alpha&&(t._alpha=e,t.a2x_ua=!0),t._changeTransformInfo[5]=!0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"skewX",{get:function(){return this._skewX},set:function(e){var t=this;e==t._skewX&&0==t._rotation||(t._skewX=e,t._rotation=0,t.a2x_um=!0),t._changeTransformInfo[4]=!0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"skewY",{get:function(){return this._skewY},set:function(e){var t=this;e==t._skewY&&0==t._rotation||(t._skewY=e,t._rotation=0,t.a2x_um=!0),t._changeTransformInfo[4]=!0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"anchorX",{get:function(){return this._anchorX},set:function(e){var t=this;e!=t._anchorX&&(t._anchorX=e,t.a2x_um=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"anchorY",{get:function(){return this._anchorY},set:function(e){var t=this;e!=t._anchorY&&(t._anchorY=e,t.a2x_um=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"visible",{get:function(){return this._visible},set:function(e){var t=this;e!=t._visible&&(t._cp=!0,t._visible=e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"matrix",{get:function(){return this._matrix},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"mask",{get:function(){return this._mask},set:function(t){var n=this;t!=n._mask&&(t instanceof e.DisplayObject?t._isUseToMask++:n._mask instanceof e.DisplayObject&&n._mask._isUseToMask--,n._mask=t)},enumerable:!0,configurable:!0}),n.prototype.globalToLocal=function(e,t){return void 0===t&&(t=null),this._cMatrix.invert().transformPoint(e.x,e.y,t)},n.prototype.localToGlobal=function(e,t){return void 0===t&&(t=null),this._cMatrix.transformPoint(e.x,e.y,t)},Object.defineProperty(n.prototype,"hitArea",{get:function(){return this._hitArea},set:function(e){this._hitArea=e},enumerable:!0,configurable:!0}),n.prototype.hitTestPoint=function(e,t){void 0===t&&(t=!1);var a=this;if(!a.visible||!a.mouseEnable)return null;var r;return r=t?a.globalToLocal(e,n._p1):e,a._hitArea&&a._hitArea.isPointIn(r)?a:0==a._bounds.width||0==a._bounds.height?null:a._bounds.isPointIn(r)?a:null},n.prototype.getBounds=function(){return this._bounds},n.prototype.getDrawRect=function(t,a){void 0===t&&(t=null),void 0===a&&(a=null);var r=this;void 0==t&&(t=r.matrix),void 0==a&&(a=r.getBounds());var o=a.x,i=a.y,s=a.width,l=a.height;t.transformPoint(o,i,n._p1),t.transformPoint(o+s,i,n._p2),t.transformPoint(o+s,i+l,n._p3),t.transformPoint(o,i+l,n._p4),e.Rectangle.createFromPoints(n._transformRect,n._p1,n._p2,n._p3,n._p4)},n.prototype._updateMatrix=function(){var t,n,a,r,o=this,i=o.parent instanceof e.Sprite;if(t=o._cMatrix,a=o._cAlpha,i&&(n=o.parent._cMatrix,r=o.parent._cAlpha),o.a2x_um&&o._matrix.createBox(o._x,o._y,o._scaleX,o._scaleY,o._rotation,o._skewX,o._skewY,o._anchorX,o._anchorY),o._cp)o.a2x_um=o.a2x_ua=!0;else if(i){var s=o.parent;s.a2x_um&&(o.a2x_um=!0),s.a2x_ua&&(o.a2x_ua=!0)}o.a2x_um&&(t.setFrom(o._matrix),i&&t.prepend(n)),o.a2x_ua&&(a=o._alpha,i&&(a*=r)),o._cp=!1,o._cAlpha=a},n.prototype._draw=function(e){},n.prototype._render=function(t){var n=this;if(n._visible&&n._cAlpha>0&&n.isNeedDraw){var a=e.CanvasRender._ctx,r=void 0;r=n._cMatrix,a.globalAlpha!=n._cAlpha&&(a.globalAlpha=n._cAlpha),a.setTransform(r.a,r.b,r.c,r.d,r.tx,r.ty),n._draw(a)}},Object.defineProperty(n.prototype,"width",{get:function(){return this._updateMatrix(),this.getDrawRect(),n._transformRect.width},set:function(e){var t=this;t._updateMatrix(),t.getDrawRect();var a=n._transformRect.width;if(a>0){var r=e/a;t.scaleX*=r}else t.scaleX=1},enumerable:!0,configurable:!0}),n.prototype.getWH=function(){return this._updateMatrix(),this.getDrawRect(),{w:n._transformRect.width,h:n._transformRect.height}},Object.defineProperty(n.prototype,"height",{get:function(){return this._updateMatrix(),this.getDrawRect(),n._transformRect.height},set:function(e){var t=this;t._updateMatrix(),t.getDrawRect();var a=n._transformRect.height;if(a>0){var r=e/a;t.scaleY*=r}else t.scaleY=1},enumerable:!0,configurable:!0}),n.prototype.stopAllSounds=function(){var e=this.soundList;if(e instanceof Array)for(var t=e.length-1;t>=0;t--)e[t].stop()},n.prototype._checkDrawBounds=function(){var t=this;if(t.stage){t.getDrawRect(t._cMatrix,t._bounds);var a=n._transformRect;t.isNeedDraw=e.Rectangle.testRectCross(a,t.stage.renderObj.viewPort)}},n.prototype.getSound=function(e){var t=this.soundList,n=[];if(t instanceof Array)if("string"==typeof e)for(var a=t.length-1;a>=0;a--)t[a].name==e&&n.push(t[a]);else e>=0&&e<t.length&&n.push(t[e]);return n},n.prototype.addSound=function(e){var t=this;t.soundList instanceof Array||(t.soundList=[]),t.soundList.push(e)},n.prototype.removeSound=function(e){var t=this.soundList;if(t instanceof Array)if("string"==typeof e)for(var n=t.length-1;n>=0;n--)t[n].name==e&&t.splice(n,1);else e>=0&&e<t.length&&t.splice(e,1)},n.prototype.destroy=function(){var e=this;e.stopAllSounds();for(var n=0;n<e.soundList.length;n++)e.soundList[n].destroy();e.soundList=null,e._a2x_res_obj=null,e.mask=null,e.parent=null,e.stage=null,e._bounds=null,e._matrix=null,e._cMatrix=null,t.prototype.destroy.call(this)},n.prototype._onRemoveEvent=function(t){var n=this;n._isOnStage=!1;var a=n.soundList;if(a.length>0)for(var r=0;r<a.length;r++)a[r].stop2();n.dispatchEvent(e.Event.REMOVE_TO_STAGE)},n.prototype._onAddEvent=function(){var t=this;t._isOnStage=!0;var n=t.soundList;if(n.length>0)for(var a=0;a<n.length;a++)n[a].play2();t.dispatchEvent(e.Event.ADD_TO_STAGE)},n.prototype._onUpdateFrame=function(t,n){void 0===t&&(t=1),void 0===n&&(n=!1),this._visible&&!n&&this.dispatchEvent(e.Event.ENTER_FRAME)},n.prototype.startDrag=function(t,n){void 0===t&&(t=!1),void 0===n&&(n=null);var a=this;e.Stage._dragDisplay=a,e.Stage._isDragCenter=t,e.Stage._lastDragPoint.x=Number.MAX_VALUE,e.Stage._lastDragPoint.y=Number.MAX_VALUE,n?(e.Stage._dragBounds.x=n.x,e.Stage._dragBounds.y=n.y,e.Stage._dragBounds.width=n.width,e.Stage._dragBounds.height=n.height):(e.Stage._dragBounds.x=0,e.Stage._dragBounds.y=0,e.Stage._dragBounds.width=Number.MIN_VALUE,e.Stage._dragBounds.height=Number.MIN_VALUE)},n.prototype.stopDrag=function(){e.Stage._dragDisplay=null},n.prototype.clearCustomTransform=function(e){void 0===e&&(e=-1);var t=this;if(e=-1)for(var n=0;n<6;n++)t._changeTransformInfo[n]=!1;else t._changeTransformInfo[e]=!1},n.prototype.clearBounds=function(){this._bounds.x=0,this._bounds.y=0,this._bounds.width=0,this._bounds.height=0},n._p1=new e.Point,n._p2=new e.Point,n._p3=new e.Point,n._p4=new e.Point,n._transformRect=new e.Rectangle,n}(e.EventDispatcher);e.DisplayObject=t}(annie||(annie={}));var annie;!function(e){var t=function(t){function n(e){var n=t.call(this)||this;n._texture=null;var a=n;return a._instanceType="annie.Bitmap",a.bitmapData=e,n}return __extends(n,t),Object.defineProperty(n.prototype,"bitmapData",{get:function(){return this._texture},set:function(t){var n=this;if("string"==typeof t){var a=e.CanvasRender.rootContainer.createImage();a.src=t,n._texture=a,n.clearBounds()}else t!=n._texture&&(n.clearBounds(),n._texture=t)},enumerable:!0,configurable:!0}),n.prototype._updateMatrix=function(){t.prototype._updateMatrix.call(this);var e=this,n=e._texture;if(n&&0!=n.width&&0!=n.height){var a=n.width,r=n.height;e._bounds.width==a&&e._bounds.height==r||(e._bounds.width=a,e._bounds.height=r,e.a2x_um=!0),e.a2x_um&&e._checkDrawBounds(),e.a2x_um=!1,e.a2x_ua=!1}},n.prototype._draw=function(e){var t=this;e.drawImage(t._texture,0,0)},n}(e.DisplayObject);e.Bitmap=t}(annie||(annie={}));var annie;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e._command=[],e.beginRadialGradientFill=function(e,t){this._fill(n.getGradientColor(e,t))},e.beginRadialGradientStroke=function(e,t,a,r,o,i){void 0===a&&(a=1),void 0===r&&(r=0),void 0===o&&(o=0),void 0===i&&(i=10),this._stroke(n.getGradientColor(e,t),a,r,o,i)},e.a2x_ut=!0,e._instanceType="annie.Shape",e}return __extends(n,t),n.getGradientColor=function(t,a){var r,o=e.CanvasRender._ctx;r=4==t.length?o.createLinearGradient(t[0],t[1],t[2],t[3]):o.createRadialGradient(t[0],t[1],0,t[2],t[3],t[4]);for(var i=0,s=a.length;i<s;i++)r.addColorStop(a[i][0],n.getRGBA(a[i][1],a[i][2]));return r},n.getBitmapStyle=function(t){return e.CanvasRender._ctx.createPattern(t,"repeat")},n.getRGBA=function(e,t){if(0==e.indexOf("0x")&&(e=e.replace("0x","#")),e.length<7&&(e="#000000"),1!=t){e="rgba("+parseInt("0x"+e.substr(1,2))+","+parseInt("0x"+e.substr(3,2))+","+parseInt("0x"+e.substr(5,2))+","+t+")"}return e},n.prototype.addDraw=function(e,t){var n=this;n._command[n._command.length]=[1,e,t]},n.prototype.drawRoundRect=function(e,t,n,a,r,o,i,s){void 0===r&&(r=0),void 0===o&&(o=0),void 0===i&&(i=0),void 0===s&&(s=0);var l=(n<a?n:a)/2,c=0,u=0,_=0,d=0;r<0&&(r*=c=-1),r>l&&(r=l),o<0&&(o*=u=-1),o>l&&(o=l),s<0&&(s*=_=-1),s>l&&(s=l),i<0&&(i*=d=-1),i>l&&(i=l);var p=this._command;p[p.length]=[1,"moveTo",[e+n-o,t]],p[p.length]=[1,"arcTo",[e+n+o*u,t-o*u,e+n,t+o,o]],p[p.length]=[1,"lineTo",[e+n,t+a-s]],p[p.length]=[1,"arcTo",[e+n+s*_,t+a+s*_,e+n-s,t+a,s]],p[p.length]=[1,"lineTo",[e+i,t+a]],p[p.length]=[1,"arcTo",[e-i*d,t+a+i*d,e,t+a-i,i]],p[p.length]=[1,"lineTo",[e,t+r]],p[p.length]=[1,"arcTo",[e-r*c,t-r*c,e+r,t,r]],p[p.length]=[1,"closePath",[]]},n.prototype.moveTo=function(e,t){this._command[this._command.length]=[1,"moveTo",[e,t]]},n.prototype.lineTo=function(e,t){this._command[this._command.length]=[1,"lineTo",[e,t]]},n.prototype.arcTo=function(e,t){this._command[this._command.length]=[1,"arcTo",[e,t]]},n.prototype.quadraticCurveTo=function(e,t,n,a){this._command[this._command.length]=[1,"quadraticCurveTo",[e,t,n,a]]},n.prototype.bezierCurveTo=function(e,t,n,a,r,o){this._command[this._command.length]=[1,"bezierCurveTo",[e,t,n,a,r,o]]},n.prototype.closePath=function(){this._command[this._command.length]=[1,"closePath",[]]},n.prototype.drawRect=function(e,t,n,a){var r=this._command;r[r.length]=[1,"moveTo",[e,t]],r[r.length]=[1,"lineTo",[e+n,t]],r[r.length]=[1,"lineTo",[e+n,t+a]],r[r.length]=[1,"lineTo",[e,t+a]],r[r.length]=[1,"closePath",[]]},n.prototype.drawArc=function(e,t,n,a,r){this._command[this._command.length]=[1,"arc",[e,t,n,a/180*Math.PI,r/180*Math.PI]]},n.prototype.drawCircle=function(e,t,n){this._command[this._command.length]=[1,"arc",[e,t,n,0,2*Math.PI]]},n.prototype.drawEllipse=function(e,t,n,a){var r=.5522848,o=n/2*r,i=a/2*r,s=e+n,l=t+a,c=e+n/2,u=t+a/2,_=this._command;_[_.length]=[1,"moveTo",[e,u]],_[_.length]=[1,"bezierCurveTo",[e,u-i,c-o,t,c,t]],_[_.length]=[1,"bezierCurveTo",[c+o,t,s,u-i,s,u]],_[_.length]=[1,"bezierCurveTo",[s,u+i,c+o,l,c,l]],_[_.length]=[1,"bezierCurveTo",[c-o,l,e,u+i,e,u]]},n.prototype.clear=function(){var e=this;e._command=[],e.a2x_ut=!1,e.clearBounds()},n.prototype.beginFill=function(e){this._fill(e)},n.prototype.beginLinearGradientFill=function(e,t){this._fill(n.getGradientColor(e,t))},n.prototype.beginBitmapFill=function(e,t){var a=this;t&&(a._isBitmapFill=t),a._fill(n.getBitmapStyle(e))},n.prototype._fill=function(e){var t=this,n=t._command;n[n.length]=[0,"fillStyle",e],n[n.length]=[1,"beginPath",[]]},n.prototype.beginStroke=function(e,t,n,a,r){void 0===t&&(t=1),void 0===n&&(n=0),void 0===a&&(a=0),void 0===r&&(r=0),this._stroke(e,t,n,a,r)},n.prototype.beginLinearGradientStroke=function(e,t,a,r,o,i){void 0===a&&(a=1),void 0===r&&(r=0),void 0===o&&(o=0),void 0===i&&(i=10),this._stroke(n.getGradientColor(e,t),a,r,o,i)},n.prototype.beginBitmapStroke=function(e,t,a,r,o,i){void 0===a&&(a=1),void 0===r&&(r=0),void 0===o&&(o=0),void 0===i&&(i=10);var s=this;t&&(s._isBitmapStroke=t),s._stroke(n.getBitmapStyle(e),a,r,o,i)},n.prototype._stroke=function(e,t,a,r,o){var i=this._command;i[i.length]=[0,"lineWidth",t],i[i.length]=[0,"lineCap",n._caps[a]],i[i.length]=[0,"lineJoin",n._joins[r]],i[i.length]=[0,"miterLimit",o],i[i.length]=[0,"strokeStyle",e],i[i.length]=[1,"beginPath",[]]},n.prototype.endFill=function(){var e=this,t=e._command,n=e._isBitmapFill;n&&(t[t.length]=[2,"setTransform",n]),t[t.length]=[1,"fill",[]],n&&(e._isBitmapFill=null),e.a2x_ut=!0},n.prototype.setLineDash=function(e){void 0===e&&(e=[]);var t=this._command;t[t.length]=[1,"setLineDash",[e,0]]},n.prototype.endStroke=function(){var e=this,t=e._command,n=e._isBitmapStroke;n&&(t[t.length]=[2,"setTransform",n]),t[t.length]=[1,"stroke",[]],n&&(e._isBitmapStroke=null),e.a2x_ut=!0},n.prototype.decodePath=function(e){for(var t=this,n=["moveTo","lineTo","quadraticCurveTo","bezierCurveTo","closePath"],a=e.length,r=0;r<a;r++)0==e[r]||1==e[r]?(t.addDraw(n[e[r]],[e[r+1],e[r+2]]),r+=2):(t.addDraw(n[e[r]],[e[r+1],e[r+2],e[r+3],e[r+4]]),r+=4);t.a2x_ut=!0},n.prototype._updateMatrix=function(){t.prototype._updateMatrix.call(this);var e=this;if(e.a2x_ut){e.a2x_ut=!1;var n=e._command.length,a=void 0,r=void 0,o=void 0,i=void 0,s=void 0;if(n>0){var l=void 0,c=0,u=0,_=0;for(s=0;s<n;s++)if(l=e._command[s],1==l[0]){if("moveTo"==l[1]||"lineTo"==l[1]||"arcTo"==l[1]||"bezierCurveTo"==l[1])void 0==a&&(a=l[2][0]),void 0==r&&(r=l[2][1]),void 0==o&&(o=l[2][0]),void 0==i&&(i=l[2][1]),"bezierCurveTo"==l[1]?(a=Math.min(a,l[2][0],l[2][2],l[2][4]),r=Math.min(r,l[2][1],l[2][3],l[2][5]),o=Math.max(o,l[2][0],l[2][2],l[2][4]),i=Math.max(i,l[2][1],l[2][3],l[2][5]),c=l[2][4],u=l[2][5]):(a=Math.min(a,l[2][0]),r=Math.min(r,l[2][1]),o=Math.max(o,l[2][0]),i=Math.max(i,l[2][1]),c=l[2][0],u=l[2][1]);else if("quadraticCurveTo"==l[1]){var d=.5*(c+l[2][0]),p=.5*(u+l[2][1]),h=.5*(l[2][0]+l[2][2]),f=.5*(l[2][1]+l[2][3]);void 0==a&&(a=d),void 0==r&&(r=p),void 0==o&&(o=d),void 0==i&&(i=p),a=Math.min(a,d,h,l[2][2]),r=Math.min(r,p,f,l[2][3]),o=Math.max(o,d,h,l[2][2]),i=Math.max(i,p,f,l[2][3]),c=l[2][2],u=l[2][3]}else if("arc"==l[1]){var v=l[2][0],g=l[2][1],m=l[2][2],y=v-m,b=g-m,x=v+m,T=g+m;void 0==a&&(a=y),void 0==r&&(r=b),void 0==o&&(o=x),void 0==i&&(i=T),a=Math.min(a,y),r=Math.min(r,b),o=Math.max(o,x),i=Math.max(i,T)}}else"lineWidth"==l[1]&&_<l[2]&&(_=l[2]);if(void 0!=a||_>0){void 0==a&&(a=0,r=0),a-=_,r-=_,o+=_,i+=_;var w=o-a,M=i-r;e._bounds.x=a,e._bounds.y=r,e._bounds.width=w,e._bounds.height=M,e.a2x_um=!0}}}e.a2x_um&&e._checkDrawBounds(),e.a2x_um=!1,e.a2x_ua=!1},n.prototype._draw=function(e,t){void 0===t&&(t=!1);var n,a=this,r=a._command,o=r.length;e.translate(a._offsetX,a._offsetY);for(var i=!1,s=0;s<o;s++)if(n=r[s],n[0]>0){var l=n[2].length;if(t&&(i||"beginPath"==n[1]||"closePath"==n[1]||0==l))continue;if(0==l)e[n[1]]();else if(2==l)e[n[1]](n[2][0],n[2][1]);else if(4==l)e[n[1]](n[2][0],n[2][1],n[2][2],n[2][3]);else if(5==l)e[n[1]](n[2][0],n[2][1],n[2][2],n[2][3],n[2][4]);else if(6==l){var c=n[2][4],u=n[2][5];e[n[1]](n[2][0],n[2][1],n[2][2],n[2][3],c,u)}}else t?"strokeStyle"==n[1]?i=!0:"fillStyle"==n[1]&&(i=!1):e[n[1]]=n[2]},n.prototype.changeColor=function(e){for(var t=this,n=t._command.length,a=t._command,r=0;r<n;r++)0==a[r][0]&&("fillStyle"==a[r][1]&&e.fillColor&&a[r][2]!=e.fillColor&&(a[r][2]=e.fillColor,t.a2x_ut=!0),"strokeStyle"==a[r][1]&&e.strokeColor&&a[r][2]!=e.strokeColor&&(a[r][2]=e.strokeColor,t.a2x_ut=!0),"lineWidth"==a[r][1]&&e.lineWidth&&a[r][2]!=e.lineWidth&&(a[r][2]=e.lineWidth,t.a2x_ut=!0))},n.prototype.destroy=function(){var e=this;e._command=null,e._isBitmapStroke=null,e._isBitmapFill=null,t.prototype.destroy.call(this)},n._caps=["butt","round","square"],n._joins=["miter","round","bevel"],n}(e.DisplayObject);e.Shape=t}(annie||(annie={}));var annie;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.mcSpeed=1,e._cMcSpeed=1,e.mouseChildren=!0,e.children=[],e._instanceType="annie.Sprite",e}return __extends(n,t),n.prototype.destroy=function(){for(var a=this,r=0;r<a.children.length;r++)a.children[r].destroy();a.parent instanceof e.Sprite&&n._removeFormParent(a.parent,a),a.children=null,a._hitArea=null,t.prototype.destroy.call(this)},n.prototype.addChild=function(e){this.addChildAt(e,this.children.length)},n.prototype.removeChild=function(e){for(var t=this,n=t.children.length,a=0;a<n;a++)if(t.children[a]==e){t.removeChildAt(a);break}},n._getElementsByName=function(t,a,r,o,i){var s=a.children.length;if(s>0)for(var l,c=void 0,u=0;u<s;u++){if(c=a.children[u],(l=c.name)&&""!=l&&t.test(l)&&(i[i.length]=c,r))return;o&&c instanceof e.Sprite&&n._getElementsByName(t,c,r,o,i)}},n.prototype.getChildByName=function(e,t,a){if(void 0===t&&(t=!0),void 0===a&&(a=!1),!e)return null;var r,o=this;r="string"==typeof e?new RegExp("^"+e+"$"):e;var i=[];n._getElementsByName(r,o,t,a,i);var s=i.length;return 0==s?null:1==s?i[0]:i},n.prototype.addChildAt=function(t,a){if(t instanceof e.DisplayObject){var r,o=this,i=t.parent;i instanceof e.Sprite&&n._removeFormParent(i,t),r=o.children.length,a>=r?o.children[r]=t:0==a?o.children.unshift(t):o.children.splice(a,0,t),i!=o&&(t._cp=!0,t.parent=o,o._isOnStage&&!t._isOnStage&&(t.stage=o.stage,t._onAddEvent()))}},n._removeFormParent=function(e,t){for(var n=e.children,a=n.length,r=0;r<a;r++)if(n[r]==t){n.splice(r,1);break}},n.prototype.getChildAt=function(e){return this.children.length-1>=e?this.children[e]:null},n.prototype.getChildIndex=function(e){for(var t=this,n=t.children.length,a=0;a<n;a++)if(t.children[a]==e)return a;return-1},n.prototype.swapChild=function(e,t){var n=this,a=-1,r=-1,o=n.children.length;if(a="number"==typeof e?e:n.getChildIndex(e),r="number"==typeof t?t:n.getChildIndex(t),a==r||a<0||a>=o||r<0||r>=o)return!1;var i=n.children[a];return n.children[a]=n.children[r],n.children[r]=i,!0},n.prototype.removeChildAt=function(e){var t,n=this,a=n.children.length-1;a<0||(t=e==a?n.children.pop():0==e?n.children.shift():n.children.splice(e,1)[0],n._isOnStage&&t._isOnStage&&(t._onRemoveEvent(!1),t.stage=null),t.parent=null)},n.prototype.removeAllChildren=function(){for(var e=this,t=e.children.length,n=t-1;n>=0;n--)e.removeChildAt(0)},n.prototype.hitTestPoint=function(n,a){void 0===a&&(a=!1);var r=this;if(!r._visible||!r.mouseEnable)return null;if(r._hitArea)return t.prototype.hitTestPoint.call(this,n,a);var o=n;a||(o=r.localToGlobal(n,new e.Point));for(var i,s,l=r.children.length,c={},u=l-1;u>=0;u--)if(s=r.children[u],!(s._isUseToMask>0)&&(void 0==s.mask||(void 0==c[s.mask._instanceId]&&(s.mask.hitTestPoint(o,!0)?c[s.mask._instanceId]=!0:c[s.mask._instanceId]=!1),0!=c[s.mask._instanceId]))&&(i=s.hitTestPoint(o,!0)))return i;return null},n.prototype.getBounds=function(){var t=this,n=t._bounds;n.x=0,n.y=0,n.width=0,n.height=0;var a=t.children,r=a.length;if(r>0)for(var o=0;o<r;o++)a[o].visible&&0==a[o]._isUseToMask&&a[o].getDrawRect(),e.Rectangle.createFromRects(n,e.DisplayObject._transformRect);return n},n.prototype._updateMatrix=function(){var e=this;if(e._visible){t.prototype._updateMatrix.call(this);for(var n=e.children,a=n.length,r=0;r<a;r++)n[r]._updateMatrix();e.a2x_ua=!1,e.a2x_um=!1}},n.prototype._render=function(t){var n=this,a=n.children.length;if(n._visible&&n._cAlpha>0&&a>0){for(var r=n.children,o=t,i=void 0,s=void 0,l=0;l<a;l++)s=r[l],s._isUseToMask>0||(i instanceof e.DisplayObject?s.mask instanceof e.DisplayObject&&s.mask.parent==s.parent?s.mask!=i&&(o.endMask(),i=s.mask,o.beginMask(i)):(o.endMask(),i=null):s.mask instanceof e.DisplayObject&&s.mask.parent==s.parent&&(i=s.mask,o.beginMask(i)),s._render(o));i instanceof e.DisplayObject&&o.endMask()}},n.prototype._onRemoveEvent=function(n){for(var a=this,r=null,o=a.children.concat(),i=o.length,s=i-1;s>=0;s--)(r=o[s])instanceof e.DisplayObject&&r._isOnStage&&(r._onRemoveEvent(n),r.stage=null);t.prototype._onRemoveEvent.call(this,n)},n.prototype._onAddEvent=function(){for(var n=this,a=null,r=n.children.concat(),o=r.length,i=o-1;i>=0;i--)(a=r[i])instanceof e.DisplayObject&&!a._isOnStage&&(a.stage=n.stage,a._onAddEvent());t.prototype._onAddEvent.call(this)},n.prototype._onUpdateFrame=function(e,n){void 0===e&&(e=1),void 0===n&&(n=!1);var a=this;a._cMcSpeed=a.mcSpeed*e,t.prototype._onUpdateFrame.call(this,a._cMcSpeed,n);for(var r=null,o=a.children.concat(),i=o.length,s=i-1;s>=0;s--)(r=o[s])&&r._onUpdateFrame(a._cMcSpeed,n)},n}(e.DisplayObject);e.Sprite=t}(annie||(annie={}));var annie;!function(e){var t=function(t){function n(n){var a=t.call(this)||this;a.media=null,a._loop=0,a._repeate=1,a.isPlaying=!0,a.name="";var r=a;return r._instanceType="annie.Sound","string"==typeof n?(r.media=e.app.createInnerAudioContext(),r.media.src=n):r.media=n,r.media.onEnded(function(){r.dispatchEvent("onPlayEnd"),r._loop>1&&(r._loop--,
r.media.startTime=0,r.media.play())}),r.media.onPlay(function(){r.dispatchEvent("onPlayStart")}),r.media.onTimeUpdate(function(){r.dispatchEvent("onPlayUpdate",{currentTime:r.media.currentTime})}),e.Sound._soundList.push(r),a}return __extends(n,t),n.prototype.play=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0);var n=this;n.media.startTime=e,0==t?n._loop=n._repeate:(n._loop=t,n._repeate=t),n.media.play(),n.isPlaying=!0},n.prototype.stop=function(){var e=this;e.media.stop(),e.isPlaying=!1},n.prototype.pause=function(e){void 0===e&&(e=!0);var t=this;e?(t.media.pause(),t.isPlaying=!1):(t.media.play(),t.isPlaying=!0)},Object.defineProperty(n.prototype,"volume",{get:function(){return this.media.volume},set:function(e){this.media.volume=e},enumerable:!0,configurable:!0}),n.prototype.stop2=function(){var e=this;e.isPlaying&&e.media.pause()},n.prototype.play2=function(){var e=this;e.isPlaying&&e.media.play()},n.stopAllSounds=function(){for(var t=e.Sound._soundList.length,n=t-1;n>=0;n--)e.Sound._soundList[n]?e.Sound._soundList[n].stop2():e.Sound._soundList.splice(n,1)},n.resumePlaySounds=function(){for(var t=e.Sound._soundList.length,n=t-1;n>=0;n--)e.Sound._soundList[n]?e.Sound._soundList[n].play2():e.Sound._soundList.splice(n,1)},n.setAllSoundsVolume=function(t){for(var a=e.Sound._soundList.length,r=a-1;r>=0;r--)e.Sound._soundList[r]?e.Sound._soundList[r].volume=t:e.Sound._soundList.splice(r,1);n._volume=t},n.prototype.destroy=function(){for(var t=this,n=e.Sound._soundList.length,a=n-1;a>=0;a--)if(e.Sound._soundList[a]==t){e.Sound._soundList[a].stop(),e.Sound._soundList.splice(a,1);break}t.media.offTimeUpdate(),t.media.offPlay(),t.media.offEnded(),t.media=null},n._soundList=[],n._volume=1,n}(e.EventDispatcher);e.Sound=t}(annie||(annie={}));var annie;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e._curFrame=0,e._wantFrame=1,e._lastFrameObj=null,e._isPlaying=!0,e._isFront=!0,e._floatFrame=0,e._a2x_res_class={tf:1},e._a2x_res_children=[],e._a2x_script=null,e._a2x_mode=-2,e._clicked=!1,e._a2x_sounds=null,e._instanceType="annie.MovieClip",e}return __extends(n,t),Object.defineProperty(n.prototype,"currentFrame",{get:function(){var e=this;return e._wantFrame>0?e._wantFrame:e._curFrame},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isPlaying",{get:function(){return this._isPlaying},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isFront",{get:function(){return this._isFront},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"totalFrames",{get:function(){return this._a2x_res_class.tf},enumerable:!0,configurable:!0}),n.prototype.stop=function(){var e=this;0==e._wantFrame&&0==e._curFrame&&(e._wantFrame=1),e._isPlaying=!1},n.prototype.addFrameScript=function(e,t){var n=this,a=n._a2x_res_class;"string"==typeof e&&void 0!=a.label[e]&&(e=a.label[e]),n._a2x_script instanceof Object||(n._a2x_script={}),n._a2x_script[e]=t},n.prototype.removeFrameScript=function(e){var t=this,n=t._a2x_res_class;"string"==typeof e&&void 0!=n.label[e]&&(e=n.label[e]),t._a2x_script instanceof Object&&(t._a2x_script[e]=null)},Object.defineProperty(n.prototype,"isButton",{get:function(){return-1==this._a2x_mode},enumerable:!0,configurable:!0}),n.prototype.initButton=function(){var e=this;-1!=e._a2x_mode&&e._a2x_res_class.tf>1&&(e.mouseChildren=!1,e.addEventListener("onMouseDown",e._mouseEvent.bind(e)),e.addEventListener("onMuseOver",e._mouseEvent.bind(e)),e.addEventListener("onMouseUp",e._mouseEvent.bind(e)),e.addEventListener("onMouseOut",e._mouseEvent.bind(e)),e._a2x_mode=-1,e._clicked?e.totalFrames>2?e.gotoAndStop(3):e.gotoAndStop(2):e.gotoAndStop(1))},Object.defineProperty(n.prototype,"clicked",{get:function(){return this._clicked},set:function(e){var t=this;e!=t._clicked&&(e?t._mouseEvent({type:"onMouseDown"}):t.gotoAndStop(1),t._clicked=e)},enumerable:!0,configurable:!0}),n.prototype._mouseEvent=function(e){var t=this;if(!t._clicked){var n=2;"onMouseDown"==e.type?t.totalFrames>2&&(n=3):"onMouseOver"==e.type?t.totalFrames>1&&(n=2):n=1,t.gotoAndStop(n)}},n.prototype.getCurrentLabel=function(){var e=this;return e._a2x_res_class.tf>1&&e._a2x_res_class.l[e._curFrame-1]?e._a2x_res_class.l[e._curFrame-1]:null},n.prototype.nextFrame=function(){var e=this;e._wantFrame+=e._cMcSpeed,e._wantFrame>e._a2x_res_class.tf&&(e._wantFrame=e._a2x_res_class.tf),e._isPlaying=!1,e._onCheckUpdateFrame()},n.prototype.prevFrame=function(){var e=this;e._wantFrame-=e._cMcSpeed,e._wantFrame<1&&(e._wantFrame=1),e._isPlaying=!1,e._onCheckUpdateFrame()},n.prototype.gotoAndStop=function(e){var t=this,n=t._a2x_res_class,a=!1;"string"==typeof e?void 0!=n.label[e]&&(e=n.label[e],a=!0):"number"==typeof e&&e>=1&&e<=n.tf&&(a=!0),a&&(t._isPlaying=!1,t._floatFrame=0,t._wantFrame=e,t._onCheckUpdateFrame())},n.prototype.play=function(e){void 0===e&&(e=!0);var t=this;t._isPlaying=!0,t._isFront=e},n.prototype.gotoAndPlay=function(e,t){void 0===t&&(t=!0);var n=this,a=n._a2x_res_class,r=!1;"string"==typeof e?void 0!=a.label[e]&&(e=a.label[e],r=!0):"number"==typeof e&&e>=1&&e<=a.tf&&(r=!0),r&&(n._isPlaying=!0,n._isFront=t,n._floatFrame=0,n._wantFrame=e,n._onCheckUpdateFrame())},n.prototype._onCheckUpdateFrame=function(){var e=this;e._wantFrame!=e._curFrame&&e._isOnStage&&e._updateTimeline()},n.prototype._onAddEvent=function(){t.prototype._onAddEvent.call(this),this._onCheckUpdateFrame()},n.prototype._updateTimeline=function(){var t=this;if(t._a2x_res_class.tf>1&&(t._a2x_mode>=0?(t._isPlaying=!1,t.parent instanceof e.MovieClip?t._wantFrame=t.parent._wantFrame-t._a2x_mode:t._wantFrame=1):t._isPlaying&&t._wantFrame==t._curFrame&&t._visible&&(t._isFront?(t._wantFrame+=t._cMcSpeed,t._wantFrame>t._a2x_res_class.tf&&(t._wantFrame=1)):(t._wantFrame-=t._cMcSpeed,t._wantFrame<1&&(t._wantFrame=t._a2x_res_class.tf))),t._wantFrame!=t._curFrame)){var n=Math.floor(t._curFrame),a=Math.floor(t._wantFrame);if(t._floatFrame=t._wantFrame-a,t._curFrame=t._wantFrame,n!=a){var r=t._a2x_res_class,o=t._a2x_res_children,i=o.length,s=0,l=null,c=null,u=a-1,_=void 0,d=t._isFront,p=r.f[r.timeLine[u]],h=[],f=[];if(t._lastFrameObj!=p){t._lastFrameObj=p,t.children.length=0;for(var v=null,g=-1,m=i-1;m>=0;m--)s=o[m][0],l=o[m][1],c=p instanceof Object&&p.c instanceof Object?p.c[s]:null,c instanceof Object?(e.d(l,c,!0),void 0!=c.ma?(v=l,g=c.ma):v instanceof Object&&(l.mask=v,s==g&&(v=null)),t.children.unshift(l),l._isOnStage||h.unshift(l)):l._isOnStage&&f.unshift(l);t._floatFrame>0&&t._updateFrameGap();for(var y=h.length,m=0;m<y;m++)l=h[m],!l._isOnStage&&t._isOnStage&&(l._cp=!0,l.parent=t,l.stage=t.stage,l._onAddEvent());y=f.length;for(var m=0;m<y;m++)l=f[m],l._isOnStage&&t._isOnStage&&(l._onRemoveEvent(!0),l.stage=null,l.parent=null)}if(t._a2x_mode<0){var b=!1;if(t._a2x_script instanceof Object&&(_=t._a2x_script[u])instanceof Function&&(_(),b=!0),b||(_=r.a[u])instanceof Array&&t[_[0]](void 0==_[1]||_[1],void 0==_[2]||_[2]),(_=r.e[u])instanceof Array)for(var m=0;m<_.length;m++)t.dispatchEvent(e.Event.CALL_FRAME,{frameIndex:t._curFrame,frameName:_[m]});(1==t._curFrame&&!d||t._curFrame==t._a2x_res_class.tf&&d)&&t.hasEventListener(e.Event.END_FRAME)&&t.dispatchEvent(e.Event.END_FRAME,{frameIndex:t._curFrame,frameName:"endFrame"})}var x=r.s[u];if(x instanceof Object)for(var T in x)t._a2x_sounds[T-1].play(0,x[T])}else t._floatFrame>0&&t._updateFrameGap()}},n.prototype._onUpdateFrame=function(e,n){void 0===e&&(e=1),void 0===n&&(n=!1);var a,r=this;n&&(a=r._isPlaying,r._isPlaying=!1),r._updateTimeline(),n&&(r._isPlaying=a),t.prototype._onUpdateFrame.call(this,e,n)},n.prototype._onRemoveEvent=function(e){t.prototype._onRemoveEvent.call(this,e),e&&n._resetMC(this)},n.prototype._updateFrameGap=function(){for(var e=this,t=e._a2x_res_class,n=e._a2x_res_children,a=n.length,r=0,o=null,i=null,s=null,l=Math.floor(e._curFrame),c=e._lastFrameObj,u=e._floatFrame,_=t.f[t.timeLine[l]],d=a-1;d>=0;d--)if(r=n[d][0],o=n[d][1],_&&_.c&&c&&c.c&&(i=_.c[r],void 0!=(s=c.c[r])&&void 0!=i)){if(void 0!=i.tr&&1!=i.tr.length||(i.tr=[0,0,1,1,0,0]),void 0==i.al&&(i.al=1),o._changeTransformInfo[0]||(o._x=s.tr[0]+(i.tr[0]-s.tr[0])*u),o._changeTransformInfo[1]||(o._y=s.tr[1]+(i.tr[1]-s.tr[1])*u),o._changeTransformInfo[2]||(o._scaleX=s.tr[2]+(i.tr[2]-s.tr[2])*u),o._changeTransformInfo[3]||(o._scaleY=s.tr[3]+(i.tr[3]-s.tr[3])*u),!o._changeTransformInfo[4]){var p=i.tr[4]-s.tr[4],h=i.tr[5]-s.tr[5];p>180?p-=360:p<-180&&(p+=360),h>180?h-=360:h<-180&&(h+=360),o._skewX=s.tr[4]+p*u,o._skewY=s.tr[5]+h*u}o._changeTransformInfo[5]||(o._alpha=s.al+(i.al-s.al)*u,o.a2x_ua=!0),o.a2x_um=!0}e._floatFrame=0},n._resetMC=function(e){e._wantFrame=1,e._curFrame=0,e._isFront=!0,e._floatFrame=0,e._a2x_mode<-1?e._isPlaying=!0:e._isPlaying=!1},n.prototype.destroy=function(){var e=this;t.prototype.destroy.call(this),e._lastFrameObj=null,e._a2x_script=null,e._a2x_res_children=null,e._a2x_res_class=null,e._a2x_sounds=null},n}(e.Sprite);e.MovieClip=t}(annie||(annie={}));var annie;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e._textAlign="left",e._textAlpha=1,e._textHeight=0,e._lineHeight=14,e._textWidth=120,e._lineType="single",e._text="",e._font="Arial",e._size=12,e._color="#fff",e._italic=!1,e._bold=!1,e._border=!1,e._stroke=0,e._strokeColor="#000",e.realLines=[],e.a2x_ut=!0,e._instanceType="annie.TextField",e}return __extends(n,t),Object.defineProperty(n.prototype,"textAlign",{get:function(){return this._textAlign},set:function(e){var t=this;e!=t._textAlign&&(t._textAlign=e,t.a2x_ut=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"textAlpha",{get:function(){return this._textAlpha},set:function(e){var t=this;e!=t._textAlpha&&(t._textAlpha=e,t.a2x_ut=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"textHeight",{get:function(){return this._textHeight},set:function(e){var t=this;e!=t._textHeight&&(t._textHeight=e,t.a2x_ut=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(e){var t=this;e!=t._lineHeight&&(t._lineHeight=e,t.a2x_ut=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"textWidth",{get:function(){return this._textWidth},set:function(e){var t=this;e!=t._textWidth&&(t._textWidth=e,t.a2x_ut=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"lineType",{get:function(){return this._lineType},set:function(e){var t=this;e!=t._lineType&&(t._lineType=e,t.a2x_ut=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"text",{get:function(){return this._text},set:function(e){var t=this;(e+="")!=t._text&&(t._text=e,""==t._text?(t.a2x_ut=!1,t.clearBounds()):t.a2x_ut=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"font",{get:function(){return this._font},set:function(e){var t=this;e!=t._font&&(t._font=e,t.a2x_ut=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"size",{get:function(){return this._size},set:function(e){var t=this;e!=t._size&&(t._size=e,t.a2x_ut=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"color",{get:function(){return this._color},set:function(e){var t=this;e!=t._color&&(t._color=e,t.a2x_ut=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"italic",{get:function(){return this._italic},set:function(e){var t=this;e!=t._italic&&(t._italic=e,t.a2x_ut=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bold",{get:function(){return this._bold},set:function(e){var t=this;e!=t._bold&&(t._bold=e,t.a2x_ut=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"border",{get:function(){return this._border},set:function(e){var t=this;e!=t._border&&(t._border=e,t.a2x_ut=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"stroke",{get:function(){return this._stroke},set:function(e){var t=this;e!=t._stroke&&(t._stroke=e,t.a2x_ut=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"strokeColor",{get:function(){return this._strokeColor},set:function(e){var t=this;e!=t._strokeColor&&(t._strokeColor=e,t.a2x_ut=!0)},enumerable:!0,configurable:!0}),n.prototype._prepContext=function(t){var n=this,a=n.size||12;a+="px ",a+=n.font,n._bold&&(a="bold "+a),n._italic&&(a="italic "+a),t.font=a,t.textAlign=n._textAlign||"left",t.textBaseline="top",t.lineJoin="miter",t.miterLimit=2.5,t.fillStyle=e.Shape.getRGBA(n._color,n._textAlpha),t.strokeStyle=n.strokeColor,t.lineWidth=Math.abs(n._stroke)},Object.defineProperty(n.prototype,"lines",{get:function(){return this.realLines.length},enumerable:!0,configurable:!0}),n.prototype._getMeasuredWidth=function(t){return e.CanvasRender._ctx.measureText(t).width},n.prototype._updateMatrix=function(n){void 0===n&&(n=!1);var a=this;if(t.prototype._updateMatrix.call(this),a.a2x_ut){var r=e.CanvasRender._ctx;a.a2x_ut=!1;var o=a._text.toString().split(/(?:\r\n|\r|\n)/);a.realLines.length=0;var i=a.realLines;a._prepContext(r);var s=0,l=a._lineHeight;if(a._text.indexOf("\n")<0&&"single"==a.lineType){i[i.length]=o[0];var c=o[0];if(a._getMeasuredWidth(c)>a._textWidth)for(var u=a._getMeasuredWidth(c[0]),_=c[0],d=c.length,p=1;p<d;p++){if(s=r.measureText(c[p]).width,(u+=s)>a._textWidth){i[0]=_;break}_+=c[p]}}else for(var h=0,f=o.length;h<f;h++){var c=o[h];if(c){for(var u=a._getMeasuredWidth(c[0]),_=c[0],d=c.length,p=1;p<d;p++)s=r.measureText(c[p]).width,u+=s,u>a._textWidth?(i[i.length]=_,_=c[p],u=s):_+=c[p];i[i.length]=_}}var v=l*i.length+4>>0,g=a._textWidth>>0;a._offsetX=2,"center"==a._textAlign?a._offsetX+=.5*g:"right"==a._textAlign&&(a._offsetX+=g),a._bounds.width=g,a._bounds.height=v,a.a2x_um=!0}a.a2x_um&&a._checkDrawBounds(),a.a2x_um=!1,a.a2x_ua=!1},n.prototype._draw=function(e,t){void 0===t&&(t=!1);var n=this,a=n.realLines,r=n._lineHeight;n._prepContext(e),e.translate(n._offsetX,n._offsetY);for(var o=0;o<a.length;o++)n._stroke>0&&e.strokeText(a[o],0,o*r),e.fillText(a[o],0,o*r),n._stroke<0&&e.strokeText(a[o],0,o*r)},n}(e.DisplayObject);e.TextField=t}(annie||(annie={}));var annie;!function(e){var t=function(t){function n(a,r,o,i,s,l){void 0===r&&(r=640),void 0===o&&(o=1040),void 0===i&&(i=30),void 0===s&&(s="fixedHeight"),void 0===l&&(l=0);var c=t.call(this)||this;c.renderObj=null,c.renderType=0,c._viewRect=new e.Rectangle,c.isMultiTouch=!1,c.isMultiMouse=!1,c.autoSteering=!1,c.autoResize=!1,c.desWidth=0,c.desHeight=0,c.divHeight=0,c.divWidth=0,c.bgColor="",c._scaleMode="onScale",c._lastDpList={},c._ml=[],c._mp=[],c._mouseDownPoint={},c._mouseEventTypes={mousedown:"onMouseDown",mouseup:"onMouseUp",mousemove:"onMouseMove",touchstart:"onMouseDown",touchmove:"onMouseMove",touchend:"onMouseUp",tap:"onMouseClick",touchcancel:"onMouseUp",ontouchstart:"onMouseDown",ontouchmove:"onMouseMove",ontouchend:"onMouseUp",ontap:"onMouseClick",ontouchcancel:"onMouseUp"},c.sp=new e.Point,c.lp=new e.Point,c.muliPoints=[],c._mP1=new e.Point,c._mP2=new e.Point,c.mouseEvent=null,c.resize=function(){var t=this,n=e.CanvasRender.rootContainer.width,a=e.CanvasRender.rootContainer.height;0==t.divWidth||0==t.divHeight?(t.a2x_um=!0,t.divWidth=n,t.divHeight=a,t.renderObj.reSize(n,a),t.setAlign(),t.dispatchEvent("onInitStage")):t.autoResize&&(t.divWidth==n&&t.divHeight==a||(t.a2x_um=!0,t.divHeight=a,t.divWidth=n,t.renderObj.reSize(n,a),t.setAlign(),t.dispatchEvent("onResize")))};var u=c;return u.a2x_ua=!0,u.a2x_um=!0,u._instanceType="annie.Stage",u.stage=u,u._isOnStage=!0,u.name="rootStage",u.renderType=l,u.desWidth=r,u.desHeight=o,u.setFrameRate(i),u._scaleMode=s,u.anchorX=r>>1,u.anchorY=o>>1,0==l&&(u.renderObj=new e.CanvasRender(u)),u.renderObj.init(),u.mouseEvent=u._onMouseEvent.bind(u),n.addUpdateObj(u),n.stage=u,setTimeout(function(){n.flushAll()},0),c}return __extends(n,t),Object.defineProperty(n,"pause",{get:function(){return n._pause},set:function(t){var a=n;t!=a._pause&&(a._pause=t,t?e.Sound.stopAllSounds():e.Sound.resumePlaySounds(),e.globalDispatcher.dispatchEvent("onRunChanged",{pause:t}))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(e){var t=this;e!=t._scaleMode&&(t._scaleMode=e,t.setAlign())},enumerable:!0,configurable:!0}),n.prototype._render=function(e){e.begin(this.bgColor),t.prototype._render.call(this,e),e.end()},n.prototype._initMouseEvent=function(e,t,n,a,r){e._pd=!1,e.clientX=t.x,e.clientY=t.y,e.stageX=n.x,e.stageY=n.y,e.timeStamp=r,e.identifier=a},n.prototype.flush=function(){var e=this;e.resize(),e._onUpdateFrame(1),e._updateMatrix(),e._render(e.renderObj)},n.prototype.setFrameRate=function(e){n._FPS=e,n._flushTime=1e3/e},n.prototype.getFrameRate=function(){return n._FPS},n.onAppTouchEvent=function(e){if(e.changedTouches[0].hasOwnProperty("x"))for(var t=0;t<e.changedTouches.length;t++)e.changedTouches[t].clientX=e.changedTouches[t].x,e.changedTouches[t].clientY=e.changedTouches[t].y;n.stage.mouseEvent(e)},n.prototype._onMouseEvent=function(t){var a=this,r=e.CanvasRender.rootContainer._left,o=e.CanvasRender.rootContainer._top,i=n._dragDisplay;if(a.isMultiTouch&&t.changedTouches.length>1){if(2==t.changedTouches.length){a._mP1.x=t.changedTouches[0].clientX-r,a._mP1.y=t.changedTouches[0].clientY-o,a._mP2.x=t.changedTouches[1].clientX-r,a._mP2.y=t.changedTouches[1].clientY-o;var s=Math.atan2(a._mP1.y-a._mP2.y,a._mP1.x-a._mP2.x)/Math.PI*180,l=e.Point.distance(a._mP1,a._mP2);if(a.muliPoints.push({p1:a._mP1,p2:a._mP2,angle:s,dis:l}),a.muliPoints.length>=2){a._touchEvent instanceof e.TouchEvent||(a._touchEvent=new e.TouchEvent(e.TouchEvent.ON_MULTI_TOUCH),a._touchEvent.target=a);var c=a.muliPoints.length;a._touchEvent.rotate=2*(a.muliPoints[c-1].angle-a.muliPoints[c-2].angle),a._touchEvent.scale=(a.muliPoints[c-1].dis-a.muliPoints[c-2].dis)/(a.divHeight>a.divWidth?a.desWidth:a.desHeight)*4,a._touchEvent.clientPoint1.x=a.muliPoints[c-1].p1.x*e.devicePixelRatio,a._touchEvent.clientPoint2.x=a.muliPoints[c-1].p2.x*e.devicePixelRatio,a._touchEvent.clientPoint1.y=a.muliPoints[c-1].p1.y*e.devicePixelRatio,a._touchEvent.clientPoint2.y=a.muliPoints[c-1].p2.y*e.devicePixelRatio,a.dispatchEvent(a._touchEvent),a.muliPoints.shift()}}else a.muliPoints.length=0;a._mouseDownPoint={},a._lastDpList={},i&&(n._lastDragPoint.x=Number.MAX_VALUE,n._lastDragPoint.y=Number.MAX_VALUE)}else if(a.muliPoints.length>0&&(a._touchEvent.rotate=0,a._touchEvent.scale=0,a._touchEvent.clientPoint1.x=0,a._touchEvent.clientPoint2.x=0,a._touchEvent.clientPoint1.y=0,a._touchEvent.clientPoint2.y=0,a.dispatchEvent(a._touchEvent),a.muliPoints.length=0),e.EventDispatcher._totalMEC>0){var u,_=void 0,d=a._mouseEventTypes[t.type.toLowerCase()],p=[],h=void 0,f=void 0,v=void 0;if(a.isMultiMouse)_=t.changedTouches;else{var g=t.changedTouches[0];(void 0!=a._lastDpList[g.identifier]||"onMouseDown"==d&&!a._lastDpList.isStart)&&(a._lastDpList.isStart=!0),_=[g]}for(var m=_.length,y=0;y<m;y++){if(f=0,p.length=0,v=_[y].identifier,h=a._mp.length>0?a._mp.shift():new e.Point,h.x=(_[y].clientX-r)*e.devicePixelRatio,h.y=(_[y].clientY-o)*e.devicePixelRatio,a.globalToLocal(h,a.sp),i&&i.stage&&i.parent){var b=i.x,x=i.y;i.parent.globalToLocal(h,a.lp),n._isDragCenter?(b=a.lp.x,x=a.lp.y):(n._lastDragPoint.x!=Number.MAX_VALUE&&(b+=a.lp.x-n._lastDragPoint.x,x+=a.lp.y-n._lastDragPoint.y),n._lastDragPoint.x=a.lp.x,n._lastDragPoint.y=a.lp.y),a.lp.x=b,a.lp.y=x,n._dragBounds.width!=Number.MIN_VALUE&&(b<n._dragBounds.x?b=n._dragBounds.x:b>n._dragBounds.x+n._dragBounds.width&&(b=n._dragBounds.x+n._dragBounds.width),x<n._dragBounds.y?x=n._dragBounds.y:x>n._dragBounds.y+n._dragBounds.height&&(x=n._dragBounds.y+n._dragBounds.height)),i.x=b,i.y=x}if(a._ml[f]instanceof e.MouseEvent?(u=a._ml[f],u.type=d):(u=new e.MouseEvent(d),a._ml[f]=u),p[p.length]=u,a._initMouseEvent(u,h,a.sp,v,t.timeStamp),f++,"onMouseDown"==d&&(a._mouseDownPoint[v]=h),f>0){var T=a.hitTestPoint(h,!0),w=[];if(T instanceof e.DisplayObject)do{T instanceof e.Sprite&&0==T.mouseChildren&&(w.length=0),w[w.length]=T,T=T.parent}while(T instanceof e.DisplayObject);else w[0]=a;for(var c=w.length,M=c-1;M>=0;M--){T=w[M];for(var O=0;O<f;O++)!p[O]._pd&&T.hasEventListener(p[O].type)&&(p[O].currentTarget=T,p[O].target=w[0],T.globalToLocal(h,a.lp),p[O].localX=a.lp.x,p[O].localY=a.lp.y,T.dispatchEvent(p[O]))}w.reverse();for(var M=c-1;M>=0;M--){T=w[M];for(var O=0;O<f;O++)!p[O]._pd&&T.hasEventListener(p[O].type,!1)&&(p[O].currentTarget=T,p[O].target=w[f-1],T.globalToLocal(h,a.lp),p[O].localX=a.lp.x,p[O].localY=a.lp.y,T.dispatchEvent(p[O],null,!1))}if("onMouseDown"!=d){if((e.EventDispatcher.getMouseEventCount("onMouseOver")>0||e.EventDispatcher.getMouseEventCount("onMouseOut")>0)&&a._lastDpList[v]instanceof Array){var P=a._lastDpList[v].length,E=w.length;c=P>E?P:E;for(var S=!1,C=void 0,F=void 0,M=1;M<c;M++)S||a._lastDpList[v][M]!=w[M]&&(S=!0,a._ml[f]instanceof e.MouseEvent?(C=a._ml[f],C.type="onMouseOver"):(C=new e.MouseEvent("onMouseOver"),a._ml[f]=C),a._initMouseEvent(C,h,a.sp,v),f++,a._ml[f]instanceof e.MouseEvent?(F=a._ml[f],F.type="onMouseOut"):(F=new e.MouseEvent("onMouseOut"),a._ml[f]=F),a._initMouseEvent(F,h,a.sp,v)),S&&(a._lastDpList[v][M]&&(T=a._lastDpList[v][M],!F._pd&&T.hasEventListener("onMouseOut")&&(F.currentTarget=T,F.target=a._lastDpList[v][P-1],T.globalToLocal(h,a.lp),F.localX=a.lp.x,F.localY=a.lp.y,T.dispatchEvent(F))),(T=w[M])instanceof e.DisplayObject&&!C._pd&&T.hasEventListener("onMouseOver")&&(C.currentTarget=T,C.target=w[E-1],T.globalToLocal(h,a.lp),C.localX=a.lp.x,C.localY=a.lp.y,T.dispatchEvent(C)))}a._mp[a._mp.length]=h}"onMouseUp"==d?(delete a._mouseDownPoint[v],delete a._lastDpList[v],a._lastDpList.isStart=!1,i&&(n._lastDragPoint.x=Number.MAX_VALUE,n._lastDragPoint.y=Number.MAX_VALUE)):a._lastDpList[v]=w}}}},n.prototype.setAlign=function(){var e=this,t=e.divHeight,n=e.divWidth,a=e.desHeight,r=e.desWidth;e.anchorX=r>>1,e.anchorY=a>>1;var o=t>=n,i=a>=r,s=1,l=1;if(e.x=n-r>>1,e.y=t-a>>1,e.autoSteering&&i!=o){var c=t;t=n,n=c}if("noScale"!=e._scaleMode)switch(s=t/a,l=n/r,e._scaleMode){case"noBorder":l>s?s=l:l=s;break;case"showAll":l<s?s=l:l=s;break;case"fixedWidth":s=l;break;case"fixedHeight":l=s}e.scaleX=l,e.scaleY=s,e.autoSteering?e.rotation=i==o?0:a>r?-90:90:e.rotation=0,e._viewRect.x=r-n/l>>1,e._viewRect.y=a-t/s>>1,e._viewRect.width=r-2*e._viewRect.x,e._viewRect.height=a-2*e._viewRect.y},Object.defineProperty(n.prototype,"viewRect",{get:function(){return this._viewRect},enumerable:!0,configurable:!0}),n.flushAll=function(){var t=(new Date).getTime();if(n._flushTime-t+n._lastFlushTime<.1*n._flushTime&&(n._lastFlushTime=t,!n._pause))for(var a=n.allUpdateObjList.length,r=a-1;r>=0;r--)n.allUpdateObjList[r]&&n.allUpdateObjList[r].flush();e.CanvasRender.rootContainer&&e.CanvasRender.rootContainer.requestAnimationFrame(n.flushAll)},n.addUpdateObj=function(e){for(var t=!1,a=n.allUpdateObjList.length,r=0;r<a;r++)if(n.allUpdateObjList[r]==e){t=!0;break}t||n.allUpdateObjList.unshift(e)},n.removeUpdateObj=function(e){for(var t=n.allUpdateObjList.length,a=0;a<t;a++)if(n.allUpdateObjList[a]==e){n.allUpdateObjList.splice(a,1);break}},n.prototype.destroy=function(){t.prototype.destroy.call(this);var e=this;n.removeUpdateObj(e),e.renderObj.destroy(),e.renderObj=null},n._pause=!1,n.stage=null,n._FPS=30,n._dragDisplay=null,n._dragBounds=new e.Rectangle,n._lastDragPoint=new e.Point,n._isDragCenter=!1,n.allUpdateObjList=[],n._flushTime=0,n._lastFlushTime=0,n}(e.Sprite);e.Stage=t}(annie||(annie={}));var annie;!function(e){var t=function(t){function n(n){var a=t.call(this)||this;return a.viewPort=new e.Rectangle,a._instanceType="annie.CanvasRender",a}return __extends(n,t),n.prototype.begin=function(e){var t=n.rootContainer,a=n._ctx;a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,t.width,t.height),""!=e?(a.fillStyle=e,a.fillRect(0,0,t.width,t.height)):a.fillRect(0,0,1,1)},n.prototype.beginMask=function(e){var t=this,a=n._ctx;a.save(),a.beginPath(),t.drawMask(e),a.closePath(),a.clip()},n.prototype.drawMask=function(e){var t=this,a=e._cMatrix,r=n._ctx;if(r.setTransform(a.a,a.b,a.c,a.d,a.tx,a.ty),"annie.Shape"==e._instanceType)e._draw(r,!0);else if("annie.Sprite"==e._instanceType||"annie.MovieClip"==e._instanceType)for(var o=0;o<e.children.length;o++)t.drawMask(e.children[o]);else{var i=e._bounds;r.rect(0,0,i.width,i.height)}},n.prototype.endMask=function(){n._ctx.restore()},n.prototype.end=function(){},n.prototype.init=function(){n._ctx=n.rootContainer.getContext("2d")},n.prototype.reSize=function(e,t){var n=this;n.viewPort.width=e,n.viewPort.height=t},n.prototype.destroy=function(){n.rootContainer=null,n._ctx=null},n.rootContainer=null,n}(e.AObject);e.CanvasRender=t}(annie||(annie={}));var annie;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e._instanceType="annie.OffCanvasRender",e}return __extends(n,t),n.prototype.begin=function(e){var t=n.rootContainer,a=n._ctx;a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,t.width,t.height),""!=e?(a.fillStyle=e,a.fillRect(0,0,t.width,t.height)):a.fillRect(0,0,1,1)},n.prototype.beginMask=function(e){var t=this,a=n._ctx;a.save(),a.beginPath(),t.drawMask(e),a.closePath(),a.clip()},n.prototype.drawMask=function(e){var t=this,a=e._matrix,r=n._ctx;if(r.transform(a.a,a.b,a.c,a.d,a.tx,a.ty),"annie.Shape"==e._instanceType)e._draw(r,!0);else if("annie.Sprite"==e._instanceType||"annie.MovieClip"==e._instanceType)for(var o=0;o<e.children.length;o++)t.drawMask(e.children[o]);else{var i=e._bounds;r.rect(0,0,i.width,i.height)}},n.prototype.endMask=function(){n._ctx.restore()},n.prototype.draw=function(t){if(t._visible&&t._cAlpha>0){var a=t.children,r=n._ctx,o=t._matrix;if(r.save(),r.globalAlpha*=t._alpha,r.transform(o.a,o.b,o.c,o.d,o.tx,o.ty),null==t.children)0==t._offsetX&&0==t._offsetY||r.translate(t._offsetX,t._offsetY),t._draw(r);else for(var i=t.children.length,s=this,l=void 0,c=void 0,u=0;u<i;u++)c=a[u],c._isUseToMask>0||(l instanceof e.DisplayObject?c.mask instanceof e.DisplayObject&&c.mask.parent==c.parent?c.mask!=l&&(s.endMask(),l=c.mask,s.beginMask(l)):(s.endMask(),l=null):c.mask instanceof e.DisplayObject&&c.mask.parent==c.parent&&(l=c.mask,s.beginMask(l)),s.draw(c));r.restore()}},n.prototype.end=function(){},n.prototype.init=function(){n._ctx=n.rootContainer.getContext("2d")},n.prototype.reSize=function(t,a){var r=n.rootContainer;r.width=t,r.height=a,n.context.setData({offCanvasWidth:Math.ceil(t/e.devicePixelRatio),offCanvasHeight:Math.ceil(a/e.devicePixelRatio)})},n.prototype.destroy=function(){n.rootContainer=null,n._ctx=null},n}(e.AObject);e.OffCanvasRender=t}(annie||(annie={}));var annie;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e._req=null,e.responseType="json",e.dataType="json",e.url="",e.method="get",e.data="",e.headers={},e._instanceType="annie.URLLoader",e}return __extends(n,t),n.prototype.loadCancel=function(){var e=this;e._req&&e._req.abort()},n.prototype.load=function(t){var n=this;"json"==n.dataType?n.headers["content-type"]="application/json":n.headers["content-type"]="application/x-www-form-urlencoded",n._req=e.app.request({url:t,data:n.data,dataType:n.dataType,responseType:n.responseType,method:n.method,header:n.headers,success:function(t){n.dispatchEvent(e.Event.COMPLETE,{type:n.responseType,response:t.data})},faile:function(e){n.dispatchEvent("onError",{msg:e})}})},n.prototype.addHeader=function(e,t){this.headers[e]=t},n.prototype.destroy=function(){var e=this;e.loadCancel(),e.data=null,e.headers=null,e._req=null,t.prototype.destroy.call(this)},n}(e.EventDispatcher);e.URLLoader=t}(annie||(annie={}));var annie;!function(e){function t(t,n,a){if(s(t))a({status:1,name:t});else{e.app.loadSubpackage({name:t,success:function(e){a({status:1,name:t})},fail:function(e){a({status:0,name:t})}}).onProgressUpdate(n)}}function n(){var e="../resource/";""!=x&&(e="../"+x+"/resource/"),a(require(e+b[T]+"/"+b[T]+".res.js"))}function a(e){E.push(e),w+=e.length,T++,b[T]?n():(T=0,i())}function r(e){var t;for(var n in e)if(t=e[n],1==t.t){if(!(t.f instanceof Object)){t.f=[];continue}if(t.tf>1){for(var a=t.f,r=a.length,o=null,i=null,s=[],l=0;l<r;l++){if((o=a[l].c)instanceof Object){for(var c in o){var u=o[c].at;if(void 0!=u&&-1!=u){if(0==u)s.push(c);else for(var _=0;_<s.length;_++)if(s[_]==u){s.splice(_,0,c);break}delete o[c].at}}if(i instanceof Object)for(var c in i)if(o[c]instanceof Object)if(-1!=o[c].at)for(var d in i[c])void 0==o[c][d]&&"fi"!=d&&(o[c][d]=i[c][d]);else delete o[c];else o[c]=i[c]}i=o}t.ol=s}}}function o(){if(E[T].shift(),M++,S=M/w,P&&P(100*S>>0),E[T].length>0)i();else{e.res[b[T]]._f2x_had_loaded_scene=!0;var t={};t.sceneName=b[T],T++,t.sceneId=T,t.sceneTotal=b.length,T==b.length?(y=!1,O(t)):(O(t),i())}}function i(){var t,n=b[T];if(m)C=e.app.downloadFile({url:x+"/"+E[T][0].src,success:function(a){var i=e.app.getFileSystemManager(),s=a.tempFilePath;i.getFileInfo({filePath:s,success:function(a){for(var l=a.size,c=i.readFileSync(s),u=String.fromCharCode.apply(null,new Uint8Array(c,l-1)),_=parseInt(u.toString()),d=parseInt(String.fromCharCode.apply(null,new Uint8Array(c,a.size-_-1,_))),p=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(c,a.size-d-_-1,d))),h=0,f=0,v=0;v<p.length;v++){if(f=p[v].src,"javascript"==p[v].type)require("../src/"+n+"/"+n+".js");else if("image"==p[v].type){t=e.CanvasRender.rootContainer.createImage();var g="";if(f>9999){for(var m=Math.floor(f/9999),y=f%9999,b=0;b<m;b++)g+=e.app.arrayBufferToBase64(c.slice(h+9999*b,h+9999*(b+1)));g+=e.app.arrayBufferToBase64(c.slice(h+9999*m,h+9999*m+y))}else g=e.app.arrayBufferToBase64(c.slice(h,h+f));"iVBO"==g.substr(0,4)?t.src="data:image/png;base64,"+g:t.src="data:image/jpeg;base64,"+g,e.res[n][p[v].id]=t}else if("sound"==p[v].type){var x=e.app.env.USER_DATA_PATH+"/"+n+"_"+p[v].id+".mp3";try{i.writeFileSync(x,c.slice(h,h+f),"binary"),t=e.app.createInnerAudioContext(),t.src=x,e.res[n][p[v].id]=t}catch(e){console.log(e)}}else"json"==p[v].type&&(t=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(c,h,f))),e.res[n][p[v].id]=t,r(t));h+=f}o()}})}}),C.onProgressUpdate(function(e){P&&P((e.progress+100*T)/b.length>>0)});else{var a=E[T][0].type,i="../";""!=x&&(i="../"+x+"/"),"javascript"!=a?"_a2x_con"==E[T][0].id?(t=require(i+E[T][0].src),e.res[n][E[T][0].id]=t,r(t)):"image"==a?(t=e.CanvasRender.rootContainer.createImage(),t.src="./"+E[T][0].src,e.res[n][E[T][0].id]=t):"sound"==a&&(t=e.app.createInnerAudioContext(),t.src="./"+E[T][0].src,e.res[n][E[T][0].id]=t):require(i+E[T][0].src),o()}}function s(t){return!(void 0==e.res[t]||null==e.res[t]||!e.res[t]._f2x_had_loaded_scene)}function l(t){delete e.res[t];var n=e.global[t];for(var a in n)delete n[a];delete e.global[t],n=null}function c(t,n){return e.res[t][n]}function u(t,n){return new e.global[t][n]}function _(t,n){return new e.Bitmap(e.res[t][n])}function d(e,t,n){void 0===n&&(n=!1);var a;if(e._a2x_res_obj!=t){void 0!=t.tr&&1!=t.tr.length||(t.tr=[0,0,1,1,0,0]);var r=e._a2x_res_obj;if(void 0==t.al&&(t.al=1),n){var o=e.a2x_um;e._changeTransformInfo[0]||e._x==t.tr[0]||(e._x=t.tr[0],o=!0),e._changeTransformInfo[1]||e._y==t.tr[1]||(e._y=t.tr[1],o=!0),e._changeTransformInfo[2]||e._scaleX==t.tr[2]||(e._scaleX=t.tr[2],o=!0),e._changeTransformInfo[3]||e._scaleY==t.tr[3]||(e._scaleY=t.tr[3],o=!0),e._changeTransformInfo[4]||(e._skewX!=t.tr[4]&&(e._skewX=t.tr[4],e._rotation=0,o=!0),e._skewY!=t.tr[5]&&(e._skewY=t.tr[5],e._rotation=0,o=!0)),e.a2x_um=o,e._changeTransformInfo[5]||e._alpha==t.al||(e._alpha=t.al,e.a2x_ua=!0)}else r.tr!=t.tr&&(a=t.tr,e._x=a[0],e._y=a[1],e._scaleX=a[2],e._scaleY=a[3],e._skewX=a[4],e._skewY=a[5],e.a2x_um=!0),e._alpha!=t.al&&(e._alpha=t.al,e.a2x_ua=!0);void 0!=t.w&&(e.textWidth=t.w,e.textHeight=t.h),void 0!=t.t&&(-1==t.t&&e.initButton&&e.initButton(),e._a2x_mode=t.t),e._a2x_res_obj=t}}function p(t,n){var a,r=e.res[t]._a2x_con[n],o=decodeURIComponent(r[9]),i=decodeURIComponent(r[4]).replace(/\s(Regular|Medium)/,""),s=r[5],l=L[r[3]],c=F[r[2]],u=r[11],_=r[10],d=r[6],p=r[7],h=r[12],f=r[8];return a=new e.TextField,a.text=o,a.font=i,a.size=s,a.textAlign=l,a.lineType=c,a.italic=u,a.bold=_,a.color=d,a.textAlpha=p,a.border=h,a.lineHeight=f,a}
function h(t,n){for(var a=e.res[t]._a2x_con[n][1],r=new e.Shape,o=0;o<a.length;o++)1==a[o][0]?(0==a[o][1]?r.beginFill(e.Shape.getRGBA(a[o][2][0],a[o][2][1])):1==a[o][1]?r.beginLinearGradientFill(a[o][2][0],a[o][2][1]):2==a[o][1]?r.beginRadialGradientFill(a[o][2][0],a[o][2][1]):r.beginBitmapFill(c(t,a[o][2][0]),a[o][2][1]),r.decodePath(a[o][3]),r.endFill()):(0==a[o][1]?r.beginStroke(e.Shape.getRGBA(a[o][2][0],a[o][2][1]),a[o][4],a[o][5],a[o][6],a[o][7]):1==a[o][1]?r.beginLinearGradientStroke(a[o][2][0],a[o][2][1],a[o][4],a[o][5],a[o][6],a[o][7]):2==a[o][1]?r.beginRadialGradientStroke(a[o][2][0],a[o][2][1],a[o][4],a[o][5],a[o][6],a[o][7]):r.beginBitmapStroke(c(t,a[o][2][0]),a[o][2][1],a[o][4],a[o][5],a[o][6],a[o][7]),r.decodePath(a[o][3]),r.endStroke());return r}function f(t,n){return new e.Sound(e.res[t][n])}function v(t,n,a){var r=e.global,o=e.res[n],i=o._a2x_con,s=i[a];t._a2x_res_class=s;var l,c=!1;if(s.tf>1&&(c=!0,void 0==s.timeLine)){var u=s.f.length,g=[],m=u>0?s.f[0].i:s.tf,y=0;if(m>0)for(var b=0;b<m;b++)g[g.length]=-1;if(u>0)for(l=0;l<u;l++){y=l+1<u?s.f[l+1].i:s.tf,m=s.f[l].i;for(var b=0;b<y-m;b++)g[g.length]=l}s.timeLine=g,s.f instanceof Object||(s.f=[]),s.a instanceof Object||(s.a={}),s.s instanceof Object||(s.s={}),s.e instanceof Object||(s.e={});var x={};if(s.l instanceof Object)for(var T in s.l)for(var w=0;w<s.l[T].length;w++)x[s.l[T][w]]=parseInt(T)+1;else s.l=[];s.label=x}var M=s.c;if(M instanceof Object){var O=[],P=M.length,E=null,S=0,C=null,F=0;for(l=0;l<P;l++){switch(S=i[M[l]]instanceof Array?i[M[l]][0]:i[M[l]].t){case 1:case 4:s.n&&s.n[l]&&t[s.n[l]]?E=t[s.n[l]]:(4==S?E=p(n,M[l]):0==M[l].indexOf("_$")?(E=i[M[l]].tf>1?new e.MovieClip:new e.Sprite,v(E,n,M[l])):E=new r[n][M[l]],s.n&&s.n[l]&&(t[s.n[l]]=E,E.name=s.n[l]));break;case 2:E=_(n,M[l]);break;case 3:E=h(n,M[l]);break;case 5:E=f(n,M[l]),E.name=M[l],t.addSound(E)}if(c)O[O.length]=E,5==S&&(E.isPlaying=!1,t._a2x_sounds instanceof Object||(t._a2x_sounds={}),t._a2x_sounds[l]=E);else{var T=l+1;5==S?E._loop=E._repeate=s.s[0][T]:(d(E,s.f[0].c[T]),void 0!=s.f[0].c[T].ma?(C=E,F=s.f[0].c[T].ma-1):C instanceof Object&&l<=F&&(E.mask=C,l==F&&(C=null)),t.addChildAt(E,0))}}if(c){var L=s.ol;if(L instanceof Object)for(var k=0;k<L.length;k++)t._a2x_res_children[k]=[L[k],O[L[k]-1]]}}}function g(t){var n=new e.URLLoader;n.method=void 0==t.type?"get":t.type,n.data=void 0==t.data?null:t.data,n.responseType=void 0==t.responseType?void 0==t.dataType?"json":t.dataType:t.responseType,t.success instanceof Object&&n.addEventListener(e.Event.COMPLETE,t.success),t.error instanceof Object&&n.addEventListener(e.Event.ERROR,t.error),n.load(t.url)}e.suffixName=".swf",e.global={},e.classPool=e.global;var m=!1;e.res={};var y,b,x,T,w,M,O,P,E,S,C;e.loadScene=function(t,a,r,o){if(void 0===o&&(o=""),y)return void console.log("当前加载未完成");if(b=[],x=o,"string"==typeof t)if(s(t)){var l={};l.sceneName=t,l.sceneId=1,l.sceneTotal=1,r(l)}else e.res[t]={},b.push(t);else for(var c=t.length,u=0,_=0;_<c;_++)if(s(t[_])){var l={};l.sceneName=t[_],l.sceneId=++u,l.sceneTotal=c,r(l)}else e.res[t[_]]={},b.push(t[_]);if(0!=b.length)if(S=0,T=0,w=0,M=0,y=!0,O=r,P=a,E=[],0!=x.indexOf("http"))m=!1,n();else{m=!0,w=b.length;for(var _=0;_<w;_++)E.push([{src:b[_]+"/"+b[_]+e.suffixName}]);i()}},e.loadSubScene=t,e.isLoadedScene=s,e.unLoadScene=l,e.getResource=c,e.getDisplay=u,e.d=d;var F=["single","multiline"],L=["left","center","right"];e.initRes=v,e.ajax=g,console.log("https://github.com/flash2x/AnnieJS")}(annie||(annie={}));var annie;!function(e){var t=function(t){function a(){var e=t.call(this)||this;return e.pause=!1,e.currentFrame=0,e.totalFrames=0,e._isLoop=0,e._delay=0,e._isFront=!0,e._cParams=null,e._loop=!1,e}return __extends(a,t),a.prototype.init=function(t,n,a,r,o){if(void 0===r&&(r=!0),void 0===o&&(o=!0),n<=0||"number"!=typeof n)throw new Error("annie.Tween.to()或者annie.Tween.from()方法的第二个参数一定要是大于0的数字");var i=this;i.currentFrame=1;var s=n*e.Stage._FPS>>0;i.totalFrames=s>0?s:1,i.target=t,i._isTo=r,i._isLoop=0,i._startData={},i._disData={},i._delay=0,i._isFront=!0,i._ease=null,i._update=null,i._cParams=null,i._loop=!1,i._completeFun=null;for(var l in a)switch(l){case"useFrame":1==a[l]&&(i.totalFrames=n);break;case"yoyo":"number"==typeof a[l]?i._isLoop=a[l]:0==a[l]?i._isLoop=0:1==a[l]&&(i._isLoop=Number.MAX_VALUE);break;case"delay":a.useFrame?i._delay=a[l]:i._delay=a[l]*e.Stage._FPS>>0;break;case"ease":i._ease=a[l];break;case"onUpdate":i._update=a[l];break;case"onComplete":i._completeFun=a[l];break;case"completeParams":i._cParams=a[l];break;case"loop":i._loop=a[l];break;default:"number"==typeof a[l]&&(r?(i._startData[l]=t[l],i._disData[l]=a[l]-t[l]):(i._startData[l]=a[l],i._disData[l]=t[l]-a[l],t[l]=a[l]))}},a.prototype.update=function(){var e=this;if(!e.pause){if(e._isFront&&e._delay>0)return void e._delay--;var t=e.currentFrame/e.totalFrames;if(!(t<0||t>1)){e._ease&&(t=e._ease(t));var a=!1;for(var r in e._disData)a=!0,e.target[r]=e._startData[r]+e._disData[r]*t;if(!a)return void n.kill(e.instanceId);e._update&&e._update(t);var o=e._completeFun,i=e._cParams;e._isFront?++e.currentFrame>e.totalFrames&&(e._loop?e.currentFrame=1:(o&&o(i,0==e._isLoop),e._isLoop>0?(e._isFront=!1,e.currentFrame=e.totalFrames,e._isLoop--):n.kill(e.instanceId))):--e.currentFrame<0&&(o&&o(i,0==e._isLoop),e._isLoop>0?(e._isFront=!0,e.currentFrame=1):n.kill(e.instanceId))}}},a.prototype.destroy=function(){var e=this;e._update=null,e._completeFun=null,e._ease=null},a}(e.AObject);e.TweenObj=t;var n=function(){function n(){}return n.to=function(e,t,a){return n.createTween(e,t,a,!0)},n.from=function(e,t,a){return n.createTween(e,t,a,!1)},n.createTween=function(a,r,o,i,s){void 0===s&&(s=!0);for(var l,c=n._tweenList.length,u=0;u<c;u++)if(l=n._tweenList[u],a==l.target)for(var _ in l._startData)void 0!=o[_]&&(delete l._startData[_],delete l._disData[_]);return c=n._tweenPool.length,c>0?(l=n._tweenPool.shift(),l._instanceId=e.AObject._object_id++):l=new t,n._tweenList.push(l),l.init(a,r,o,i,s),l.instanceId},n.killAll=function(){for(var e,t=n._tweenList.length,a=0;a<t;a++)e=n._tweenList[a],e.target=null,e._completeFun=null,e._cParams=null,e._update=null,e._ease=null,e._loop=!1,n._tweenPool.push(e);n._tweenList.length=0},n.kill=function(e){for(var t,a=n._tweenList.length,r=0;r<a;r++)if(t=n._tweenList[r],t.instanceId==e){t.target=null,t._completeFun=null,t._cParams=null,t._update=null,t._ease=null,t._loop=null,n._tweenPool.push(t),n._tweenList.splice(r,1);break}},n.quadraticIn=function(e){return e*e},n.quadraticOut=function(e){return e*(2-e)},n.quadraticInOut=function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},n.cubicIn=function(e){return e*e*e},n.cubicOut=function(e){return--e*e*e+1},n.cubicInOut=function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},n.quarticIn=function(e){return e*e*e*e},n.quarticOut=function(e){return 1- --e*e*e*e},n.quarticInOut=function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},n.quinticIn=function(e){return e*e*e*e*e},n.quinticOut=function(e){return--e*e*e*e*e+1},n.quinticInOut=function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},n.sinusoidalIn=function(e){return 1-Math.cos(e*Math.PI/2)},n.sinusoidalOut=function(e){return Math.sin(e*Math.PI/2)},n.sinusoidalInOut=function(e){return.5*(1-Math.cos(Math.PI*e))},n.exponentialIn=function(e){return 0==e?0:Math.pow(1024,e-1)},n.exponentialOut=function(e){return 1==e?1:1-Math.pow(2,-10*e)},n.exponentialInOut=function(e){return 0==e?0:1==e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))},n.circularIn=function(e){return 1-Math.sqrt(1-e*e)},n.circularOut=function(e){return Math.sqrt(1- --e*e)},n.circularInOut=function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},n.elasticIn=function(e){return 0==e?0:1==e?1:-Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)},n.elasticOut=function(e){return 0==e?0:1==e?1:Math.pow(2,-10*e)*Math.sin(5*(e-.1)*Math.PI)+1},n.elasticInOut=function(e){return 0==e?0:1==e?1:(e*=2,e<1?-.5*Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)+1)},n.backIn=function(e){var t=1.70158;return e*e*((t+1)*e-t)},n.backOut=function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},n.backInOut=function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)},n.bounceIn=function(e){return 1-n.bounceOut(1-e)},n.bounceOut=function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},n.bounceInOut=function(e){return e<.5?.5*n.bounceIn(2*e):.5*n.bounceOut(2*e-1)+.5},n.flush=function(){for(var e=n._tweenList.length,t=e-1;t>=0;t--)n._tweenList[t]?n._tweenList[t].update():n._tweenList.splice(t,1)},n._tweenPool=[],n._tweenList=[],n}();e.Tween=n}(annie||(annie={}));var annie;!function(e){var t=function(t){function n(a,r){void 0===r&&(r=0);var o=t.call(this)||this;o._currentCount=0,o._delay=0,o._frameDelay=0,o._currentFrameDelay=0,o._repeatCount=0,o._running=!1,a<=0&&(a=1);var i=o;return i._delay=a,i._frameDelay=Math.ceil(.001*a*e.Stage._FPS),i._repeatCount=r,n._timerList.push(i),o}return __extends(n,t),n.prototype.reset=function(){var e=this;e._running=!1,e._currentCount=0,e._currentFrameDelay=0},n.prototype.start=function(){var e=this;e._running=!0,e._currentCount==e._repeatCount&&(e._currentCount=0)},n.prototype.stop=function(){this._running=!1},Object.defineProperty(n.prototype,"currentCount",{get:function(){return this._currentCount},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"delay",{get:function(){return this._delay},set:function(t){this._delay=t,this._frameDelay=Math.ceil(.001*t*e.Stage._FPS)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"repeatCount",{get:function(){return this._repeatCount},set:function(e){e<0&&(e=0),this._repeatCount=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"running",{get:function(){return this._running},enumerable:!0,configurable:!0}),n.prototype.kill=function(){for(var e=n._timerList.length,t=this,a=0;a<e;a++)if(n._timerList[a]._instanceId==t._instanceId){n._timerList.splice(a,1);break}},n.prototype.update=function(){var e=this;e._running&&++e._currentFrameDelay==e._frameDelay&&(e._repeatCount&&e._currentCount++,e._currentFrameDelay=0,e.dispatchEvent("onTimer"),e._repeatCount&&e._currentCount==e._repeatCount&&(e._running=!1,e.dispatchEvent("onTimerComplete")))},n.flush=function(){for(var e=n._timerList.length,t=e-1;t>=0;t--)n._timerList[t]?n._timerList[t].update():n._timerList.splice(t,1)},n.prototype.destroy=function(){this.kill(),t.prototype.destroy.call(this)},n._timerList=[],n}(e.EventDispatcher);e.Timer=t}(annie||(annie={}));var annie;!function(e){e.version="annie_MinApp_3.2.5",e.app=null,e.globalDispatcher=new e.EventDispatcher,e.devicePixelRatio=1,e.StageScaleMode={EXACT_FIT:"exactFit",NO_BORDER:"noBorder",NO_SCALE:"noScale",SHOW_ALL:"showAll",FIXED_WIDTH:"fixedWidth",FIXED_HEIGHT:"fixedHeight"};var t;e.toDisplayDataURL=function(n,a,r,o){void 0===a&&(a=null),void 0===r&&(r=null),void 0===o&&(o=""),t||(t=new e.OffCanvasRender,t.init()),n._updateMatrix(),null==a&&(a=n.getBounds());var i=Math.ceil(a.width),s=Math.ceil(a.height);return t.reSize(i,s),t.begin(o),e.OffCanvasRender._ctx.translate(-a.x,-a.y),t.draw(n),r?"jpeg"==r.type&&(r.quality?r.quality/=100:r.quality=.8):r={type:"png"},e.OffCanvasRender.rootContainer.toDataURL("image/"+r.type,r.quality)},e.getStagePixels=function(t,n){var a=t.localToGlobal(new e.Point(n.x,n.y));return e.CanvasRender._ctx.getImageData(a.x,a.y,n.width,n.height)}}(annie||(annie={})),annie.Stage.addUpdateObj(annie.Tween),annie.Stage.addUpdateObj(annie.Timer);
annie.A2xExtend=__extends;
module.exports=annie;
